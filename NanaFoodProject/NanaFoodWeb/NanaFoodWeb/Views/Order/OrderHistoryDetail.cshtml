@{
    ViewData["title"] = "View Order";
    var listOrder = ViewBag.ReviewList as List<NanaFoodWeb.Models.Dto.ReviewProductDto>;
    double TotalProduct = 0;
}
@model NanaFoodWeb.Models.Order
<style>
    .primary-color {
        color: #f6c23e;
    }

    .primary-bg {
        background-color: #f6c23e;
        color: #fff;
    }

    .section-title {
        background-color: #f6c23e;
        color: #fff;
        padding: 0.1rem;
        font-weight: bold;
    }

    .form-control-plaintext {
        font-weight: bold;
    }

    .table thead th {
        background-color: #f6c23e;
        color: #fff;
        font-weight: bold;
    }
</style>
<div class="container">
    <div class="card shadow">
        <div class="card-header">
            <!-- Header -->
            <div class="row mb-2 text-center">
                <h1>Chi tiết đơn hàng</h1>
            </div>
        </div>
        <div class="card-body">
            <div class="container my-4">

                <!-- Client Information -->
                <div class="row mb-2">
                    <div class="col-12 section-title">Thông tin người nhận</div>
                    <div class="col-md-12">
                        <label class="form-label">Họ Tên:</label>
                        <input asp-for=FullName type="text" class="form-control-plaintext" readonly>
                    </div>
                    <div class="col-md-12">
                        <label class="form-label">Địa chỉ:</label>
                        <input asp-for=Address type="text" class="form-control-plaintext" readonly>
                    </div>
                    <div class="col-md-12">
                        <label class="form-label">Số điện thoại:</label>
                        <input asp-for=PhoneNumber type="text" class="form-control-plaintext" readonly>
                    </div>
                </div>

                <!-- thông tin sản phẩm trong đơn hàng -->
                <div class="row mb-4">
                    <div class="col-12 section-title">Thông tin đơn hàng</div>
                    <div class="col-12 mt-2">
                        <table class="table table-bordered text-center">
                            <thead>
                                <tr>
                                    <th>Tên sản phẩm</th>
                                    <th>Giá</th>
                                    <th>Số lượng</th>
                                    <th>Tổng tiền</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in listOrder)
                                {
                                    <tr>
                                        <td>
                                            @item.ProductName
                                        </td>
                                        <td>@item.Price.ToString("#,##") VNĐ</td>
                                        <td>@item.Quantity</td>
                                        <td>@item.Total.ToString("#,##") VNĐ</td>
                                    </tr>
                                    TotalProduct += item.Total;
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- thông tin giao nhận -->
                <div class="row mb-2">
                    <div class="col-md-6">
                        <div class="section-title">Thông tin thanh toán </div>
                        <p>Phương thức thanh toán: @Model.PaymentType</p>
                        <p>Trạng thái thanh toán: @Model.PaymentStatus</p>
                        <p>Phí ship: @Model.ShipmentFee.ToString("#,##") VNĐ</p>
                        <p>Tổng tiền: @TotalProduct.ToString("#,##") VNĐ</p>
                        <p><strong>Tổng thanh toán: @Model.Total.ToString("#,##") VNĐ</strong></p>
                    </div>

                    <!-- ghi chú -->
                    <div class="col-md-6">
                        <div class="col-12 section-title">Ghi chú </div>
                        <div class="col-12 mt-2 mb-2">
                            <textarea asp-for="Note" readonly></textarea>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="text-right g-2">
                        @if (Model.OrderStatus == "Đang chuẩn bị" && Model.PaymentStatus == "Chưa thanh toán")
                        {
                            <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                Hủy đơn
                            </button>

                            <!-- Modal -->
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Xác nhận hủy đơn</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="text-left">
                                                <strong>Bản có chắc muốn hủy đơn này ?</strong>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                            <a asp-action="CancelOrder" asp-controller="Order" asp-route-orderId="@Model.OrderId" class="btn btn-outline-danger">Hủy đơn</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        <a asp-action="OrderHistory" asp-controller="Order" class="btn btn-outline-secondary">Quay lại</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

@* <div class=" container">
    <div class="d-flex align-content-center">
        <div class="card box-shadow-edit">
            <div class="card-body row">
                <div class="mb-2 col-6">
                    <label asp-for="OrderId"></label>
                    <input asp-for="OrderId" class="form-control" readonly />
                </div>
                <div class="mb-2 col-6">
                    <label asp-for="FullName"></label>
                    <input asp-for="FullName" class="form-control" readonly />
                </div>
                <div class="mb-2">
                    <label asp-for="Address"></label>
                    <textarea rows="3" asp-for="Address" class="form-control" readonly></textarea>
                </div>
                <div class="mb-2 col-6">
                    <label asp-for="PhoneNumber"></label>
                    <input asp-for="PhoneNumber" class="form-control" readonly />
                </div>
                <div class="mb-2 col-6">
                    <label asp-for="PaymentType"></label>
                    <input asp-for="PaymentType" class="form-control" readonly />
                </div>
                <div class="mb-2 col-6">
                    <label asp-for="PaymentStatus"></label>
                    <input asp-for="PaymentStatus" class="form-control" readonly />
                </div>
                <div class="mb-2 col-6">
                    <label asp-for="OrderDate"></label>
                    <input asp-for="OrderDate" class="form-control" readonly />
                </div>
                <div class="mb-2">
                    <label asp-for="OrderStatus"></label>
                    <input asp-for="OrderStatus" class="form-control" readonly />
                </div>
                <div class="mb-2">
                    <label asp-for="Note"></label>
                    <input asp-for="Note" class="form-control" readonly />
                </div>
                <a asp-action="Order" asp-controller="Auth" class="btn btn-info col-auto mx-3">Go back</a>
                <a asp-action="OrderDetail" asp-controller="Order" asp-route-id="@Model.OrderId" class="btn btn-warning col-auto mx-3">View food order</a>
                @if (Model.OrderStatus != "Đang huỷ đơn" && Model.PaymentStatus == "Chưa thanh toán")
                {
                    <a asp-action="Cancel" asp-controller="Order" asp-route-id="@Model.OrderId" class="btn btn-primary col-auto">Cancel order</a>
                }
            </div>
        </div>
    </div>
</div> *@